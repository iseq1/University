# Roast-n-Run

## О проекте
**Roast-n-Run** — учебный проект, выполненный в рамках семестровой работы.  
Проект представляет собой **веб-сайт кафе**, где можно просматривать меню напитков и чаев, регистрироваться, оформлять заказы и управлять информацией о пользователях.

### Основные возможности:
- Просмотр меню напитков и чаев с категориями и подробным описанием.
- Регистрация и авторизация пользователей.
- Оформление и подтверждение заказов.
- Отображение профиля пользователя и статистики по заказам.
- Скрипты для создания и наполнения базы данных.

---

## Технологии
- **Backend:** Python, Flask  
- **База данных:** SQLite  
- **Frontend:** HTML, CSS, Jinja2 (шаблоны Flask)  
- **Хостинг:** PythonAnywhere  

---

## Структура проекта
```
.../
│
├── sem_work/
│ ├── app.py # Основной файл Flask-приложения
│ ├── database.db # SQLite база данных
│ ├── static/ # Статические файлы (CSS, изображения)
│ ├── templates/ # HTML-шаблоны страниц
│ ├── dbcreate.py # Скрипт создания таблиц БД
│ ├── dbfill.py # Скрипт наполнения БД тестовыми данными
│ ├── dbpush.py # Класс DataPusher для работы с БД
│ └── requirements.txt # Зависимости проекта
│
└── README.md 
```
---

## Реализация проекта

### Архитектура
- **Flask** — веб-фреймворк для обработки HTTP-запросов и рендеринга страниц.  
- **SQLite** — база данных для хранения пользователей, меню и контента.  
- **Jinja2** — шаблонизатор для динамических страниц.  
- **Static и templates** — хранят CSS, JS, изображения и HTML-шаблоны.

### Основные файлы и их функции

| Файл / Класс | Назначение |
|--------------|------------|
| `app.py` | Основной Flask-приложение, содержит маршруты, обработку форм и сессии пользователей |
| `dbpush.py` / `DataPusher` | Класс для работы с SQLite: SELECT, INSERT, UPDATE, DELETE |
| `dbcreate.py` | Скрипт для создания таблиц в базе данных |
| `dbfill.py` | Скрипт для наполнения базы тестовыми данными |
| `database.db` | SQLite база с таблицами и данными |
| `static/` | Изображения, CSS, JS |
| `templates/` | HTML-шаблоны страниц |

### Основные маршруты (routes)

| Route | Метод | Описание |
|-------|-------|----------|
| `/` | GET | Главная страница сайта |
| `/coffee-menu` | GET | Страница меню с напитками и чаями |
| `/profile` | GET | Профиль пользователя |
| `/register` | GET/POST | Регистрация нового пользователя |
| `/login` | GET/POST | Авторизация пользователя |
| `/confirm_order` | POST | Подтверждение заказа и обновление данных пользователя |
| `/logout` | GET | Выход пользователя из сессии |

### Работа с базой данных
- **Абсолютный путь к базе** гарантирует корректную работу на PythonAnywhere.  
- Все операции с БД через класс `DataPusher`:  
  - `select_data()` — выборка данных  
  - `insert_data()` — добавление новых записей  
  - `update_data()` — обновление существующих записей  
  - `delete_data()` — удаление записей  
- Таблицы:
  - `menu` — информация о напитках  
  - `menu_size_info` — размеры и калории  
  - `menu_description_info` — ингредиенты  
  - `User` — информация о пользователях и их активности  

### Особенности реализации
- Сессии Flask используются для авторизации и хранения логина пользователя.  
- Jinja2-шаблоны динамически отображают меню, заказы и профиль.  
- Скрипты `dbcreate.py` и `dbfill.py` позволяют быстро создать рабочую БД.  
- Абсолютные пути к базе позволяют одинаково работать локально и на сервере.

---

## Развертывание на PythonAnywhere

1. **Регистрация и создание аккаунта**  
   - Зарегистрироваться на [PythonAnywhere](https://www.pythonanywhere.com/)  

2. **Загрузка проекта**  
   ```bash
   git clone ...
   ```
3. **Создание виртуального окружения и установка зависимостей**  
   ```bash
    python3 -m venv venv
    source venv/bin/activate
    pip install -r requirements.txt
   ```
4. **Настройка WSGI**  
   ```python
      import sys, os
      project_home = '/home/atlantie/sem_work'
      if project_home not in sys.path:
          sys.path.insert(0, project_home)
      from app import app as application
   ```
5. **Инициализация базы данных**  
   ```python
    python dbcreate.py
    python dbfill.py
    ```
---

## Использование

Ссылка на сайт: https://atlantie.pythonanywhere.com/
>Если сайт долго не используется (~60 минут), то он переходит в sleep mode.<br>
>В таком случае он может запуститься не сразу: стоит не паниковать, а подождать пару секунд и перезагрузить страницу
